{"ast":null,"code":"import _regeneratorRuntime from\"D:/Trabalho/TCC/G10-Senai3S-STL/ok-entregas-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"D:/Trabalho/TCC/G10-Senai3S-STL/ok-entregas-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _asyncToGenerator from\"D:/Trabalho/TCC/G10-Senai3S-STL/ok-entregas-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:/Trabalho/TCC/G10-Senai3S-STL/ok-entregas-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/Trabalho/TCC/G10-Senai3S-STL/ok-entregas-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/Trabalho/TCC/G10-Senai3S-STL/ok-entregas-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/Trabalho/TCC/G10-Senai3S-STL/ok-entregas-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import axios from'axios';import{parseJwt}from'../services/auth';import logo from'../img/logo.png';import welcome from'../img/welcome.png';import'../css/base-style.css';import'../css/login.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.efetuaLogin=function(event){event.preventDefault();_this.setState({erroMensagem:'',isLoading:true});axios.post('http://localhost:5000/api/login',{email:_this.state.email,senha:_this.state.senha}).then(function(resposta){if(resposta.status===200){localStorage.setItem('usuario-login',resposta.data.token);console.log('Meu token: '+resposta.data.token);_this.setState({isLoading:false});console.log(parseJwt());console.log(parseJwt().role);if(parseJwt().role===\"admin\"){_this.props.history.push('/home');}else{_this.props.history.push('/');}}}).catch(function(){_this.setState({erroMensagem:\"E-mail ou senha inválidos! Tente novamente.\",isLoading:false});});};_this.atualizaStateCampo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(campo){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState(_defineProperty({},campo.target.name,campo.target.value));case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={email:\"\",senha:\"\",erroMensagem:\"\",isLoading:false};return _this;}_createClass(Login,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"glass\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.efetuaLogin,className:\"forms\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputs\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:this.state.email,onChange:this.atualizaStateCampo})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputs\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Senha\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"senha\",value:this.state.senha,onChange:this.atualizaStateCampo})]}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"forgot\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Esqueceu a sua senha ?\"})}),/*#__PURE__*/_jsx(\"p\",{children:this.state.erroMensagem}),this.state.isLoading===true&&/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:true,children:\"Loading...\"}),this.state.isLoading===false&&/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:this.state.email===''||this.state.senha===''?'none':'',className:\"btn\",children:\"Login\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"images\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"ilustration\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,className:\"logo\",alt:\"Logo OK Entregas\"}),/*#__PURE__*/_jsx(\"img\",{src:welcome,className:\"welcome\",alt:\"Ilustra\\xE7\\xE3o com mensagem de bem-vindo\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bc1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bc2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"circle\"}),/*#__PURE__*/_jsx(\"div\",{className:\"square\"})]});}}]);return Login;}(Component);export{Login as default};","map":{"version":3,"sources":["D:/Trabalho/TCC/G10-Senai3S-STL/ok-entregas-front/src/pages/login.js"],"names":["React","Component","Link","axios","parseJwt","logo","welcome","Login","props","efetuaLogin","event","preventDefault","setState","erroMensagem","isLoading","post","email","state","senha","then","resposta","status","localStorage","setItem","data","token","console","log","role","history","push","catch","atualizaStateCampo","campo","target","name","value"],"mappings":"uoCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OAASC,QAAT,KAAyB,kBAAzB,CAEA,MAAOC,CAAAA,IAAP,KAAiB,iBAAjB,CACA,MAAOC,CAAAA,OAAP,KAAoB,oBAApB,CAEA,MAAO,uBAAP,CACA,MAAO,kBAAP,C,2FAEqBC,CAAAA,K,8FACjB,eAAYC,KAAZ,CAAmB,uCACf,uBAAMA,KAAN,EADe,MAUvBC,WAVuB,CAUV,SAACC,KAAD,CAAU,CACnBA,KAAK,CAACC,cAAN,GAEA,MAAKC,QAAL,CAAc,CAAEC,YAAY,CAAC,EAAf,CAAmBC,SAAS,CAAE,IAA9B,CAAd,EACAX,KAAK,CAACY,IAAN,CAAW,iCAAX,CAA8C,CAC1CC,KAAK,CAAE,MAAKC,KAAL,CAAWD,KADwB,CAE1CE,KAAK,CAAE,MAAKD,KAAL,CAAWC,KAFwB,CAA9C,EAKCC,IALD,CAKM,SAAAC,QAAQ,CAAI,CACd,GAAGA,QAAQ,CAACC,MAAT,GAAmB,GAAtB,CAA0B,CACtBC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAsCH,QAAQ,CAACI,IAAT,CAAcC,KAApD,EAEAC,OAAO,CAACC,GAAR,CAAY,cAAgBP,QAAQ,CAACI,IAAT,CAAcC,KAA1C,EACA,MAAKb,QAAL,CAAc,CAACE,SAAS,CAAE,KAAZ,CAAd,EAEAY,OAAO,CAACC,GAAR,CAAYvB,QAAQ,EAApB,EACAsB,OAAO,CAACC,GAAR,CAAYvB,QAAQ,GAAGwB,IAAvB,EAEA,GAAIxB,QAAQ,GAAGwB,IAAX,GAAoB,OAAxB,CAAiC,CAC7B,MAAKpB,KAAL,CAAWqB,OAAX,CAAmBC,IAAnB,CAAwB,OAAxB,EACH,CAFD,IAGI,CACA,MAAKtB,KAAL,CAAWqB,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,EACH,CACJ,CACJ,CAtBD,EAwBCC,KAxBD,CAwBO,UAAM,CACT,MAAKnB,QAAL,CAAc,CAAEC,YAAY,CAAG,6CAAjB,CAAgEC,SAAS,CAAE,KAA3E,CAAd,EAEH,CA3BD,EA4BH,CA1CsB,OA4CvBkB,kBA5CuB,0FA4CD,iBAAOC,KAAP,kHAClB,MAAKrB,QAAL,oBAAiBqB,KAAK,CAACC,MAAN,CAAaC,IAA9B,CAAsCF,KAAK,CAACC,MAAN,CAAaE,KAAnD,GADkB,sDA5CC,+DAEf,MAAKnB,KAAL,CAAa,CACTD,KAAK,CAAE,EADE,CAETE,KAAK,CAAE,EAFE,CAGTL,YAAY,CAAE,EAHL,CAITC,SAAS,CAAE,KAJF,CAAb,CAFe,aAQlB,C,wCAwCD,iBAAS,CACL,mBACI,qCACI,iBAAS,SAAS,CAAC,OAAnB,wBACI,aAAK,SAAS,CAAC,WAAf,wBACI,6BADJ,cAEI,cAAM,QAAQ,CAAE,KAAKL,WAArB,CAAkC,SAAS,CAAC,OAA5C,wBACI,aAAK,SAAS,CAAC,QAAf,wBACI,iCADJ,cAEI,cACA,IAAI,CAAC,OADL,CAEA,IAAI,CAAC,OAFL,CAGA,KAAK,CAAE,KAAKQ,KAAL,CAAWD,KAHlB,CAIA,QAAQ,CAAE,KAAKgB,kBAJf,EAFJ,GADJ,cAWI,aAAK,SAAS,CAAC,QAAf,wBACI,gCADJ,cAEI,cACA,IAAI,CAAC,UADL,CAEA,IAAI,CAAC,OAFL,CAGA,KAAK,CAAE,KAAKf,KAAL,CAAWC,KAHlB,CAIA,QAAQ,CAAE,KAAKc,kBAJf,EAFJ,GAXJ,cAoBI,KAAC,IAAD,EAAM,EAAE,CAAE,GAAV,CAAc,SAAS,CAAC,QAAxB,uBAAiC,6CAAjC,EApBJ,cAqBI,mBAAI,KAAKf,KAAL,CAAWJ,YAAf,EArBJ,CAyBQ,KAAKI,KAAL,CAAWH,SAAX,GAAyB,IAAzB,eACA,eAAQ,IAAI,CAAC,QAAb,CAAsB,QAAQ,KAA9B,wBA1BR,CA8BQ,KAAKG,KAAL,CAAWH,SAAX,GAAyB,KAAzB,eACA,eAEI,IAAI,CAAC,QAFT,CAGI,QAAQ,CAAE,KAAKG,KAAL,CAAWD,KAAX,GAAoB,EAApB,EAA0B,KAAKC,KAAL,CAAWC,KAAX,GAAoB,EAA9C,CAAmD,MAAnD,CAA4D,EAH1E,CAII,SAAS,CAAC,KAJd,mBA/BR,GAFJ,GADJ,cA+CI,YAAK,SAAS,CAAC,QAAf,uBACI,aAAK,SAAS,CAAC,aAAf,wBACI,YAAK,GAAG,CAAEb,IAAV,CAAgB,SAAS,CAAC,MAA1B,CAAiC,GAAG,CAAC,kBAArC,EADJ,cAEI,YAAK,GAAG,CAAEC,OAAV,CAAmB,SAAS,CAAC,SAA7B,CAAuC,GAAG,CAAC,4CAA3C,EAFJ,GADJ,EA/CJ,GADJ,cAuDI,YAAK,SAAS,CAAC,KAAf,EAvDJ,cAwDI,YAAK,SAAS,CAAC,KAAf,EAxDJ,cAyDI,YAAK,SAAS,CAAC,QAAf,EAzDJ,cA0DI,YAAK,SAAS,CAAC,QAAf,EA1DJ,GADJ,CA8DH,C,mBAhH8BL,S,SAAdM,K","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nimport { parseJwt } from '../services/auth';\r\n\r\nimport logo from '../img/logo.png'\r\nimport welcome from '../img/welcome.png'\r\n\r\nimport '../css/base-style.css'\r\nimport '../css/login.css'\r\n\r\nexport default class Login extends Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            email: \"\",\r\n            senha: \"\",\r\n            erroMensagem: \"\",\r\n            isLoading: false\r\n        }\r\n    };\r\n\r\nefetuaLogin =(event) =>{\r\n    event.preventDefault();\r\n\r\n    this.setState({ erroMensagem:'', isLoading: true})\r\n    axios.post('http://localhost:5000/api/login', {\r\n        email: this.state.email,\r\n        senha: this.state.senha\r\n    })\r\n\r\n    .then(resposta => {\r\n        if(resposta.status ===200){\r\n            localStorage.setItem('usuario-login', resposta.data.token)\r\n\r\n            console.log('Meu token: ' + resposta.data.token)\r\n            this.setState({isLoading: false})\r\n\r\n            console.log(parseJwt());\r\n            console.log(parseJwt().role);\r\n\r\n            if (parseJwt().role === \"admin\") {\r\n                this.props.history.push('/home')\r\n            }\r\n            else{\r\n                this.props.history.push('/')\r\n            }\r\n        }\r\n    })\r\n\r\n    .catch(() => {\r\n        this.setState({ erroMensagem : \"E-mail ou senha inválidos! Tente novamente.\", isLoading: false})\r\n        \r\n    })\r\n}\r\n\r\natualizaStateCampo =  async (campo) => {\r\n    this.setState({ [campo.target.name] : campo.target.value})\r\n}\r\n\r\n    render() {\r\n        return (\r\n            <main>\r\n                <section className=\"glass\">\r\n                    <div className=\"user-info\">\r\n                        <h1>Login</h1>\r\n                        <form onSubmit={this.efetuaLogin} className=\"forms\">\r\n                            <div className=\"inputs\">\r\n                                <label>E-mail</label>\r\n                                <input\r\n                                type=\"email\"\r\n                                name=\"email\"\r\n                                value={this.state.email}\r\n                                onChange={this.atualizaStateCampo}\r\n                                \r\n                                ></input>\r\n                            </div>\r\n                            <div className=\"inputs\">\r\n                                <label>Senha</label>\r\n                                <input \r\n                                type=\"password\"\r\n                                name=\"senha\"\r\n                                value={this.state.senha}\r\n                                onChange={this.atualizaStateCampo}\r\n                                ></input>\r\n                            </div>\r\n                            <Link to =\"/\" className=\"forgot\"><p>Esqueceu a sua senha ?</p></Link>\r\n                            <p>{this.state.erroMensagem}</p>\r\n\r\n                            \r\n                            {\r\n                                this.state.isLoading === true && \r\n                                <button type=\"submit\" disabled>Loading...</button>\r\n                            }\r\n\r\n                            {\r\n                                this.state.isLoading === false && \r\n                                <button\r\n                                \r\n                                    type=\"submit\"\r\n                                    disabled={this.state.email ==='' || this.state.senha ==='' ? 'none' : ''}\r\n                                    className=\"btn\"\r\n                                >\r\n                                    Login\r\n                                </button>\r\n                            }\r\n\r\n                            {/* <button type=\"submit\" className=\"btn\">Logar</button>  */}\r\n                        </form>\r\n                    </div>\r\n                    <div className=\"images\">\r\n                        <div className=\"ilustration\">\r\n                            <img src={logo} className=\"logo\" alt=\"Logo OK Entregas\"/>\r\n                            <img src={welcome} className=\"welcome\" alt=\"Ilustração com mensagem de bem-vindo\"/>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <div className=\"bc1\"></div>\r\n                <div className=\"bc2\"></div>\r\n                <div className=\"circle\"></div>\r\n                <div className=\"square\"></div>\r\n            </main>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}